<!DOCTYPE html>
<!-- saved from url=(0127)http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>YOFFE</title>
        
    <link rel="stylesheet" type="text/css" href="./Redux快速上手_files/main.css">
</head>
<body>
<div class="navbar navbar-line">
    <div class="container">
        <div class="logo">
            
                YOFFE
            
        </div>
        <input type="checkbox" id="idoc_nav">
        <div class="menu_tree">
        <ul><li><a href="http://guoyongfeng.github.io/idoc/index.html">首页</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#"><span></span>React课程专题</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/React%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97.html">React学习指南</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/React%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB.html">React技术分享</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/React%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.html">React编码规范</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/React%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E8%AF%A6%E8%A7%A3.html">React基础知识详解</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E4%B8%80%E6%AD%A5%E6%AD%A5%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%AF%84%E8%AE%BA%E5%BA%94%E7%94%A8.html">一步步搭建一个评论应用</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/github-notetaker%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91.html">github-notetaker应用开发</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/React-AJAX%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html">React-AJAX的最佳实践</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/React-router%E8%B7%AF%E7%94%B1%E5%AE%9E%E8%B7%B5.html">React-router路由实践</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/React%E9%AB%98%E7%BA%A7%E7%A0%94%E8%AE%A8%E8%AF%BE%E5%A4%A7%E7%BA%B2.html">React高级研讨课大纲</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Babel%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html">Babel使用指南</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%85%A8%E6%A0%88Redux%E5%AE%9E%E6%88%98.html">全栈Redux实战</a></li><li class="active"><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html">Redux快速上手</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E8%B6%85%E9%85%B7%E7%9A%84%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7Redux-Devtools.html">Redux超酷的开发工具Redux-Devtools</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Redux%E7%9A%84Middleware.html">深入理解Redux的Middleware</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/JavaScript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html">JavaScript函数式编程</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E7%BB%84%E4%BB%B6%E6%B5%8B%E8%AF%95.html">组件测试</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E4%BD%BF%E7%94%A8Webpack%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E6%80%81%E5%B7%A5%E4%BD%9C%E6%B5%81.html">使用Webpack搭建开发态工作流</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Webpack%E5%9F%BA%E7%A1%80.html">Webpack基础</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E4%BD%BF%E7%94%A8Webpack%E6%90%AD%E5%BB%BA%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%B7%A5%E4%BD%9C%E6%B5%81.html">使用Webpack搭建生产环境工作流</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%BF%AB%E9%80%9F%E6%90%9E%E5%AE%9A%E5%B8%B8%E7%94%A8%E7%9A%84ES6%E6%96%B0%E7%89%B9%E6%80%A7.html">快速搞定常用的ES6新特性</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#"><span></span>前沿观察</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E6%B2%BF%E8%A7%82%E5%AF%9F/ECMAScript%206%E5%85%A5%E9%97%A8.html">ECMAScript 6入门</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E6%B2%BF%E8%A7%82%E5%AF%9F/Immutable%E8%AF%A6%E8%A7%A3%E5%8F%8AReact%E4%B8%AD%E5%AE%9E%E8%B7%B5.html">Immutable详解及React中实践</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E6%B2%BF%E8%A7%82%E5%AF%9F/Node.js%20MVC%E6%A1%86%E6%9E%B6ThinkJS.html">Node.js MVC框架ThinkJS</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E6%B2%BF%E8%A7%82%E5%AF%9F/Nodejs%205.0.0%E7%89%88%E6%9C%AC.html">Nodejs 5.0.0版本</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E6%B2%BF%E8%A7%82%E5%AF%9F/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93PostgreSQL.html">关系型数据库PostgreSQL</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E6%B2%BF%E8%A7%82%E5%AF%9F/%E8%BD%BB%E5%9E%8BMVVM%E6%A1%86%E6%9E%B6Vue.js.html">轻型MVVM框架Vue.js</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E6%B2%BF%E8%A7%82%E5%AF%9F/%E5%9F%BA%E4%BA%8Enodejs%E7%9A%84%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6koa.html">基于nodejs的开发框架koa</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#"><span></span>前端工程化</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%89%8D%E7%AB%AF%E6%A8%A1%E6%9D%BF.html">前端模板</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%92%8C%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E7%9A%84%E7%88%B1%E6%81%A8%E6%83%85%E4%BB%87.html">性能优化和前端工程的爱恨情仇</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack%E5%85%A5%E9%97%A8%E5%8F%8A%E5%AE%9E%E8%B7%B5.html">webpack入门及实践</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E4%B8%8D%E5%AE%8C%E5%85%A8%E8%A3%85%E9%80%BC%E6%8C%87%E5%8D%97.html">前端工程化不完全装逼指南</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#"><span></span>性能优化</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/jshint%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E6%A3%80%E6%B5%8B.html">jshint代码质量检测</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/jshint%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E.html">jshint配置说明</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/NC%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html">NC性能优化</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9.html">性能优化待办事项</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%82%B9%E6%80%BB%E7%BB%93.html">性能优化点总结</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#"><span></span>技术分享</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/%E5%AD%A6%E4%B9%A0Git.html">学习Git</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1.html">面向对象</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/Node.js%E7%9F%A5%E8%AF%86%E8%AF%A6%E8%A7%A3.html">Node.js知识详解</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/2015%E5%B9%B4%E5%A4%A7%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93.html">2015年大前端技术年终总结</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/Nodejs%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html">Nodejs环境配置</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/NPM%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95.html">NPM的使用方法</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/%E5%9F%BA%E6%9C%ACSHELL%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8.html">基本SHELL命令使用</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/Git%E5%92%8CGithub%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97.html">Git和Github快速入门指南</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#"><span></span>团队</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%9B%A2%E9%98%9F/%E6%96%B0%E5%91%98%E5%B7%A5%E5%85%A5%E8%81%8C%E6%8C%87%E5%8D%97.html">新员工入职指南</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%9B%A2%E9%98%9F/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95%E5%A4%A7%E7%BA%B2.html">笔试面试大纲</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%9B%A2%E9%98%9F/%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF%E6%A0%88%E8%A7%84%E5%88%92.html">项目技术栈规划</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%9B%A2%E9%98%9F/React%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B.html">React组件开发过程</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/%E5%9B%A2%E9%98%9F/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%B9%B3%E5%8F%B0.html">前端技术平台</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/CONTACT.html">CONTACT</a></li></ul>    
        </div>
        
        
        <div class="forkgithub"><a target="_blank" href="https://github.com/GuoYongfeng">fork on github</a></div>
        

        <section class="idoc_nav_btn">
            <label for="idoc_nav"><span></span></label>
        </section>
    </div>
    
</div>




<div class="container">

    <div class="page-toc">
        <ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t0Redux快速上手">Redux快速上手</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t11. 基本介绍">1. 基本介绍</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t21.1 Flux &amp; Redux">1.1 Flux &amp; Redux</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t31.2 对 Redux 的介绍">1.2 对 Redux 的介绍</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t42. 快速上手">2. 快速上手</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t53. 理解 Redux 的核心概念">3. 理解 Redux 的核心概念</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t63.1 Action &amp; Action Creator">3.1 Action &amp; Action Creator</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t73.2 Reducer">3.2 Reducer</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t83.3 Store">3.3 Store</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t93.3.1 getState()">3.3.1 getState()</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t103.3.2 dispatch(action)">3.3.2 dispatch(action)</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t113.3.3 subscribe(listener)">3.3.3 subscribe(listener)</a></li></ul></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t124. Redux 的顶层 API 介绍">4. Redux 的顶层 API 介绍</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t134.1 createStore">4.1 createStore</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t144.2 combineReducers">4.2 combineReducers</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t154.3 applyMiddleware">4.3 applyMiddleware</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t164.4 bindActionCreators">4.4 bindActionCreators</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t174.5 compose">4.5 compose</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t185. 使用 React-redux 连接 react 和 redux">5. 使用 React-redux 连接 react 和 redux</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t195.1 没有react-redux的写法">5.1 没有react-redux的写法</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t205.2 React-redux 提供的 connect 和 Provider">5.2 React-redux 提供的 connect 和 Provider</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t216. 一步步开发一个 TODO 应用">6. 一步步开发一个 TODO 应用</a><ul><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t226.1 入口文件">6.1 入口文件</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t236.2 Action 创建函数和常量">6.2 Action 创建函数和常量</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t246.3 Reducers">6.3 Reducers</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t256.4 容器组件">6.4 容器组件</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t266.5 展示组件">6.5 展示组件</a></li></ul></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t27完结寄语">完结寄语</a></li><li><a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t28参考资料">参考资料</a></li></ul></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h1 style="font-size: 40px;text-align:center;color: #007cdc;" id="t0Redux快速上手">Redux快速上手 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t0Redux快速上手"> # </a></h1>

<blockquote>
<p><strong>重要提示：</strong> 本教程配套示例代码请前往<a href="https://github.com/GuoYongfeng/redux-complete-sample">redux-complete-sample</a>下载，课程中会有大量的示例操作，操作说明均基于这个配套的示例代码仓库，所以为了方便学习，请务必下载安装并启动。</p>
</blockquote>
<p>在开始往下阅读之前，我默认你已经学习了前面的课程，并且掌握了Webpack、ES6、React等知识的应用。</p>
<p>在前面的课程，我们已经使用React创建了一个应用，但是在实际项目中，面对复杂业务逻辑的挑战，如何清晰高效的管理应用内的数据流动成为了关键。</p>
<p>Flux思想已经在提出后得到逐步推广，并广泛应用到实际的项目中。facebook的flux实现，开源社区的reflux、redux等类库开始涌现并得到了广大开发者的认同和使用。</p>
<p>Redux以其简单易用、文档齐全易懂等优点在开源社区得到开发者的一致好评，所以接下来让我们一起走进Redux，学习并将其使用到我们实际的项目开发中。</p>
<h2 id="t11. 基本介绍">1. 基本介绍 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t11. 基本介绍"> # </a></h2>
<p>React 已经帮我们在视图层解决了禁止异步和直接操作 DOM 等问题，让页面的高效渲染和组件化开发成为了可能。美中不足的是，React 依旧把处理 state 中数据的问题留给了你，那么，Redux的出现就是为了帮你解决这个问题。</p>
<h3 id="t21.1 Flux &amp; Redux">1.1 Flux &amp; Redux <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t21.1 Flux &amp; Redux"> # </a></h3>
<p>最初，Facebook官方提出了FLUX思想管理数据流，同时也给出了自己的实现方案<a href="https://github.com/facebook/flux">flux</a>来管理React应用。</p>
<p><img src="./Redux快速上手_files/flux.jpg"></p>
<p><strong>看图说话：</strong><br>
1.在view中触发action中的方法后<br>
2.action发送dispatch<br>
3.store接收新的数据进行合并，然后触发View中绑定在store上的方法<br>
4.最后通过修改局部state来改变view的展示<br></p>
<p><img src="./Redux快速上手_files/redux.jpg"></p>
<p><strong>看图说话：</strong><br>
1.view直接触发dispatch<br>
2.dispatch将action发送到reducer中后，根节点上会更新props，改变全局view。<br>
3.redux将view和store的绑定从手动编码中提取出来，放在了统一规范放在了自己的体系中。<br></p>
<blockquote>
<p>相对于Flux而言，Redux的实现更简单，思路更清晰，写的代码也相对更少；只维护单一的 store；在github上收货了16000+的star，广受欢迎...</p>
</blockquote>
<h3 id="t31.2 对 Redux 的介绍">1.2 对 Redux 的介绍 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t31.2 对 Redux 的介绍"> # </a></h3>
<ul>
<li>Redux 是 State 容器，提供可预测化的状态管理</li>
<li>它可以让你构建一致化的应用，运行于不同的环境（客户端、服务器、原生应用），并且易于测试</li>
<li>还提供 redux-devtools 让开发者享受超爽的开发体验</li>
<li>体小精悍（只有2kB）且没有任何依赖</li>
<li>拥有丰富的生态圈：教程、开发者工具、路由、组件、中间件、工具集...</li>
</ul>
<h2 id="t42. 快速上手">2. 快速上手 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t42. 快速上手"> # </a></h2>
<p>本次教程内容的所有示例可以在<a href="https://github.com/GuoYongfeng/redux-complete-sample"></a></p>
<pre><code>$ git clone git@github.com:GuoYongfeng/redux-complete-sample.git
$ cd redux-complete-sample &amp;&amp; npm install
$ cd demo-redux-start
$ webpack-dev-server --progress --colors
</code></pre><p>示例代码快速体验</p>
<pre><code>import { createStore } from 'redux';

// 这是一个 reducer，形式为 (state, action) =&gt; state 的纯函数。描述了 action 如何把 state 转变成下一个 state。

// state 的形式取决于你，可以是基本类型、数组、对象、
// 甚至是 Immutable.js 生成的数据结构。惟一的要点是
// 当 state 变化时需要返回全新的对象，而不是修改传入的参数。
function counter(state = 0, action) {
  switch (action.type) {
  case 'INCREMENT':
    return state + 1;
  case 'DECREMENT':
    return state - 1;
  default:
    return state;
  }
}

// 创建 Redux store 来存放应用的状态。
// API 是 { subscribe, dispatch, getState }。
let store = createStore(counter);

// 一个单纯渲染页面内容的函数
const PureRender = () =&gt; {
  document.body.innerText = store.getState();
}

// 可以手动订阅更新，也可以事件绑定到视图层。
store.subscribe(PureRender);
// 执行渲染函数
PureRender();

// 改变内部 state 惟一方法是 dispatch 一个 action。
// action 可以被序列化，用日记记录和储存下来，后期还可以以回放的方式执行
document.addEventListener('click', function( e ){
  // store dispatch 调度分发一个 action（fire）
  store.dispatch({ type: 'DECREMENT'});
})
</code></pre><h2 id="t53. 理解 Redux 的核心概念">3. 理解 Redux 的核心概念 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t53. 理解 Redux 的核心概念"> # </a></h2>
<h3 id="t63.1 Action &amp; Action Creator">3.1 Action &amp; Action Creator <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t63.1 Action &amp; Action Creator"> # </a></h3>
<p>在 Redux 中，改变 State 只能通过 action，它是 store 数据的唯一来源。一般来说你会通过 store.dispatch() 将 action 传到 store。。并且，每一个 action 都必须是 Javascript 的简单对象，例如：</p>
<pre><code>{
  type: 'ADD_TODO',
  text: 'Learn Redux'
}
</code></pre><p>Redux 要求 action 是可以被序列化的，使这得应用程序的状态保存、回放、Undo 之类的功能可以被实现。因此，action 中不能包含诸如函数调用这样的不可序列化字段。</p>
<p>action 的格式是有建议规范的，可以包含以下字段：</p>
<pre><code>{
  type: 'ADD_TODO',
  payload: {
    text: 'Do something.'
  },
  `meta: {}`
}
</code></pre><p>如果 action 用来表示出错的情况，则可能为：</p>
<pre><code>{
  type: 'ADD_TODO',
  payload: new Error(),
  error: true
}
</code></pre><p>type 是必须要有的属性，其他都是可选的。完整建议请参考 <a href="https://github.com/acdlite/flux-standard-action">Flux Standard Action(FSA)</a> 定义。已经有不少第三方模块是基于 FSA 的约定来开发了。</p>
<p><strong>Action Creator</strong></p>
<p>事实上，创建 action 对象很少用这种每次直接声明对象的方式，更多地是通过一个创建函数。这个函数被称为Action Creator，例如：</p>
<pre><code>function addTodo(text) {
  return {
    type: ADD_TODO,
    text
  };
}
</code></pre><p>Action Creator 看起来很简单，但是如果结合上 Middleware 就可以变得非常灵活，后面会专门讲 Middleware 。</p>
<h3 id="t73.2 Reducer">3.2 Reducer <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t73.2 Reducer"> # </a></h3>
<p>我们先来看一下 Javascript 中 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce_clone">Array.prototype.reduce</a> 的用法：</p>
<pre><code>const initState = '';
const actions = ['a', 'b', 'c'];
// 传入当前的 state 和 action ，返回新的 state
const newState = actions.reduce((curState, action) =&gt; curState + action);
console.log( newState );
</code></pre><p>对应的理解，Redux 中的 reducer 是一个纯函数，传入state和action，返回一个新的state tree，简单而纯粹的完成某一件具体的事情，没有依赖，<strong>简单而纯粹是它的标签</strong>。</p>
<pre><code>const counter = (state = 0, action) =&gt; {
  switch (action.type) {
      case 'INCREMENT':
        return state + 1;
      case 'DECREMENT':
        return state - 1;
      default:
        return state;
  }
}
</code></pre><h3 id="t83.3 Store">3.3 Store <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t83.3 Store"> # </a></h3>
<p>Store 就是用来维持应用所有的 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html">state 树</a> 的一个对象。
改变 store 内 state 的惟一途径是对它 dispatch 一个 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html">action</a>。</p>
<p>Store 是一个具有以下四个方法的对象：</p>
<ul>
<li><code>getState()</code></li>
<li><code>dispatch(action)</code></li>
<li><code>subscribe(listener)</code></li>
<li><code>replaceReducer(nextReducer)</code></li>
</ul>
<h4 id="t93.3.1 getState()">3.3.1 getState() <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t93.3.1 getState()"> # </a></h4>
<p>返回应用当前的 state 树。
它与 store 的最后一个 reducer 返回值相同。</p>
<p>返回值：应用当前的 state 树。</p>
<h4 id="t103.3.2 dispatch(action)">3.3.2 dispatch(action) <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t103.3.2 dispatch(action)"> # </a></h4>
<p>dispatch 分发 action。这是触发 state 变化的惟一途径。</p>
<p>会使用当前 <code>getState()</code> 的结果和传入的 <code>action</code> 以同步方式的调用 store 的 reduce 函数。返回值会被作为下一个 state。从现在开始，这就成为了 <code>getState()</code> 的返回值，同时变化监听器(change listener)会被触发。</p>
<blockquote>
<p>在 Redux 里，只会在根 reducer 返回新 state 结束后再会调用事件监听器，因此，你可以在事件监听器里再做 dispatch。惟一使你不能在 reducer 中途 dispatch 的原因是要确保 reducer 没有副作用。如果 action 处理会产生副作用，正确的做法是使用异步 action 创建函数。</p>
</blockquote>
<p>示例：</p>
<pre><code>import { createStore } from 'redux'

// reducer
const todos = (state = [''], action) =&gt; {
  switch (action.type) {
    case 'ADD_TODO':
      console.log(Object.assign([], state, [action.text]))
      return Object.assign([], state, [action.text]);
    default:
      return state;
  }
}

let store = createStore(todos, [ 'Use Redux' ])

// action creator
function addTodo(text) {
  return {
    type: 'ADD_TODO',
    text
  }
}

// dispatch
store.dispatch(addTodo('Read the docs'))
store.dispatch(addTodo('Read about the middleware'))
</code></pre><h4 id="t113.3.3 subscribe(listener)">3.3.3 subscribe(listener) <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t113.3.3 subscribe(listener)"> # </a></h4>
<p>添加一个变化监听器。每当 dispatch action 的时候就会执行，state 树中的一部分可能已经变化。这是一个底层 API。多数情况下，你不会直接使用它，会使用一些 React（或其它库）的绑定。</p>
<p>示例</p>
<pre><code>import { createStore } from 'redux'

// reducer
const todos = (state = [''], action) =&gt; {
  switch (action.type) {
    case 'ADD_TODO':
      return Object.assign([], state, [action.text]);
    default:
      return state;
  }
}

let store = createStore(todos, [ 'Use Redux' ])

// action creator
function addTodo(text) {
  return {
    type: 'ADD_TODO',
    text
  }
}

const handleChange =  () =&gt; {
  console.log(store.getState());
}

let unsubscribe = store.subscribe(handleChange)

handleChange()

// dispatch
store.dispatch(addTodo('Read the docs'))
store.dispatch(addTodo('Read about the middleware'))
</code></pre><h2 id="t124. Redux 的顶层 API 介绍">4. Redux 的顶层 API 介绍 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t124. Redux 的顶层 API 介绍"> # </a></h2>
<h3 id="t134.1 createStore">4.1 createStore <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t134.1 createStore"> # </a></h3>
<p>调用方式：createStore(reducer, [initialState])</p>
<p>创建一个 Redux store 来以存放应用中所有的 state，应用中应有且仅有一个 store。
这个API返回一个store，这个store中保存了应用所有 state 的对象。改变 state 的惟一方法是 dispatch action。你也可以 subscribe 监听 state 的变化，然后更新 UI。我们来看一个示例</p>
<p><strong>我们可以试着模拟 createStore，深入了解其原理</strong></p>
<pre><code>// reducer 纯函数，具体的action执行逻辑
const counter = (state = 0, action) =&gt; {
  switch (action.type) {
      case 'INCREMENT':
        return state + 1;
      case 'DECREMENT':
        return state - 1;
      default:
        return state;
  }
}

// 模拟create store，了解其原理
const createStore = (reducer) =&gt; {
  let state;
  let listeners = [];

  const getState = () =&gt; state;

  const dispatch = (action) =&gt; {
    state = reducer(state, action);
    listeners.forEach(listener =&gt; listener());
  }

  const subscribe = (listener) =&gt; {
      listeners.push(listener);
      return () =&gt; {
        listeners = listeners.filter(item =&gt; item !== listener);
      }
  }

  dispatch({});

  return { getState, dispatch, subscribe };
}

const store = createStore(counter);

// view 对应到React里面的component
const PureRender = () =&gt; {
  document.body.innerText = store.getState();
}

// store subscribe 订阅或是监听view（on）
store.subscribe(PureRender);
PureRender();

document.addEventListener('click', function( e ){
  // store dispatch 调度分发一个 action（fire）
  store.dispatch({ type: 'DECREMENT'});
})
</code></pre><h3 id="t144.2 combineReducers">4.2 combineReducers <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t144.2 combineReducers"> # </a></h3>
<p>调用方式：combineReducers(reducers)</p>
<p>随着应用变得复杂，需要对 reducer 函数进行拆分，拆分后的每一块独立负责管理 state 的一部分。把一个由多个不同 reducer 函数作为 value 的 object，合并成一个最终的 reducer 函数，然后就可以对这个 reducer 调用 createStore。</p>
<p><strong>示例如下</strong></p>
<p>代码清单：<code>reducer/todos.js</code></p>
<pre><code>export default function todos(state = [], action) {
  switch (action.type) {
  case 'ADD_TODO':
    return state.concat([action.text])
  default:
    return state
  }
}
</code></pre><p>代码清单：<code>reducer/counter.js</code></p>
<pre><code>export default function counter(state = 0, action) {
  switch (action.type) {
  case 'INCREMENT':
    return state + 1
  case 'DECREMENT':
    return state - 1
  default:
    return state
  }
}
</code></pre><p>代码清单：<code>reducers/index.js</code></p>
<pre><code>import { combineReducers } from 'redux'
import todos from './todos'
import counter from './counter'

export default combineReducers({
  todos,
  counter
})
</code></pre><p>代码清单：<code>App.js</code></p>
<pre><code>import { createStore } from 'redux'
import reducer from './reducer/index.js'

let store = createStore(reducer)
console.log('当前的 state :', store.getState())

store.dispatch({
  type: 'ADD_TODO',
  text: 'Use Redux'
})
store.dispatch({
  type: 'INCREMENT',
})
console.log('改变后的 state :', store.getState())
</code></pre><h3 id="t154.3 applyMiddleware">4.3 applyMiddleware <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t154.3 applyMiddleware"> # </a></h3>
<p>调用方式：applyMiddleware(...middlewares)</p>
<p>使用包含自定义功能的 middleware 来扩展 Redux 是一种推荐的方式。Middleware 可以让你包装 store 的 dispatch 方法来达到你想要的目的。同时， middleware 还拥有“可组合”这一关键特性。多个 middleware 可以被组合到一起使用，形成 middleware 链。其中，每个 middleware 都不需要关心链中它前后的 middleware 的任何信息。</p>
<p>具体用法我们高级部分详细说明。</p>
<h3 id="t164.4 bindActionCreators">4.4 bindActionCreators <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t164.4 bindActionCreators"> # </a></h3>
<p>调用方式：bindActionCreators(actionCreators, dispatch)</p>
<p>惟一使用 bindActionCreators 的场景是当你需要把 action creator 往下传到一个组件上，却不想让这个组件觉察到 Redux 的存在，而且不希望把 Redux store 或 dispatch 传给它。</p>
<p>具体用法我们高级部分详细说明。</p>
<h3 id="t174.5 compose">4.5 compose <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t174.5 compose"> # </a></h3>
<p>调用方式：compose(...functions)</p>
<p>compose 用来实现从右到左来组合传入的多个函数，它做的只是让你不使用深度右括号的情况下来写深度嵌套的函数，仅此而已。</p>
<h2 id="t185. 使用 React-redux 连接 react 和 redux">5. 使用 React-redux 连接 react 和 redux <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t185. 使用 React-redux 连接 react 和 redux"> # </a></h2>
<h3 id="t195.1 没有react-redux的写法">5.1 没有react-redux的写法 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t195.1 没有react-redux的写法"> # </a></h3>
<p>封装一个组件，将组件和Redux做基本的组合</p>
<pre><code>import { createStore } from 'redux';
import React, { Component } from 'react';
import ReactDOM from 'react-dom';

// reducer 纯函数，具体的action执行逻辑
const counter = (state = 0, action) =&gt; {
  switch (action.type) {
      case 'INCREMENT':
        return state + 1;
      case 'DECREMENT':
        return state - 1;
      default:
        return state;
  }
}

const store = createStore(counter);

// Counter 组件
class Counter extends Component {
  render(){
    return (
      &lt;div&gt;
        &lt;h1&gt;{this.props.value}&lt;/h1&gt;
        &lt;button onClick={this.props.onIncrement}&gt;点击加1&lt;/button&gt;
        &lt;button onClick={this.props.onDecrement}&gt;点击减1&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}

const PureRender = () =&gt; {
  ReactDOM.render(
      &lt;Counter
        value={store.getState()}
        onIncrement={ () =&gt; store.dispatch({type: "INCREMENT"}) }
        onDecrement={ () =&gt; store.dispatch({type: "DECREMENT"}) }
      /&gt;, document.getElementById('app')
  );
}

// store subscribe 订阅或是监听view（on）
store.subscribe(PureRender)
PureRender()
</code></pre><h3 id="t205.2 React-redux 提供的 connect 和 Provider">5.2 React-redux 提供的 connect 和 Provider <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t205.2 React-redux 提供的 connect 和 Provider"> # </a></h3>
<p><code>&lt;Provider store&gt;</code> 使组件层级中的 <code>connect()</code> 方法都能够获得 <code>Redux store</code>。正常情况下，你的根组件应该嵌套在 <code>`&lt;Provider&gt;</code> 中才能使用 <code>connect()</code> 方法。</p>
<pre><code>ReactDOM.render(
  {/*  使组件层级中的 connect() 方法都能够获得 Redux store */}
  &lt;Provider store={store}&gt;
    {/* 这里传入的组件MyRootComponent是组件层级的根组件 */}
    &lt;MyRootComponent /&gt;
  &lt;/Provider&gt;,
  rootEl
);
</code></pre><p><code>connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</code>
connect方法是用来连接 React 组件与 Redux store，连接操作不会改变原来的组件类，反而返回一个新的已与 Redux store 连接的组件类。</p>
<p><strong>使用react-redux的一个简单完整示例</strong></p>
<pre><code>import React, { Component, PropTypes } from 'react'
import ReactDOM from 'react-dom'
import { createStore } from 'redux'
import { Provider, connect } from 'react-redux'

// 这是一个展示型组件 Counter
class Counter extends Component {
  render() {
    const { value, onIncreaseClick } = this.props
    return (
      &lt;div&gt;
        &lt;span&gt;{value}&lt;/span&gt;
        &lt;button onClick={onIncreaseClick}&gt;戳我加1&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}

Counter.propTypes = {
  value: PropTypes.number.isRequired,
  onIncreaseClick: PropTypes.func.isRequired
}

// Action
const increaseAction = { type: 'increase' }

// Reducer
function counter(state = { count: 0 }, action) {
  let count = state.count
  switch (action.type) {
    case 'increase':
      return { count: count + 1 }
    default:
      return state
  }
}

// Store
let store = createStore(counter)

// Map Redux state to component props
function mapStateToProps(state) {
  // 这里拿到的state就是store里面给的state
  console.log(state);
  return {
    value: state.count
  }
}

// Map Redux actions to component props
function mapDispatchToProps(dispatch) {
  // dispatch(action) { }
  return {
    onIncreaseClick: () =&gt; dispatch(increaseAction)
  }
}

class App extends Component {
  render() {
    // store里的state经过connect连接后给了根组件的props
    console.log(this.props);
    return (
      &lt;div&gt;
        &lt;h1&gt;学习使用react-redux&lt;/h1&gt;
        &lt;Counter {...this.props} /&gt;
      &lt;/div&gt;
    )
  }
}

// Connected Component
let RootApp = connect(
  mapStateToProps,
  mapDispatchToProps
)(App)

ReactDOM.render(
  &lt;Provider store={store}&gt;
    &lt;RootApp /&gt;
  &lt;/Provider&gt;,
  document.getElementById('app')
)
</code></pre><p>实际应用中，connect这个部分会比较复杂，我们后续高级部分内容进行补充。</p>
<h2 id="t216. 一步步开发一个 TODO 应用">6. 一步步开发一个 TODO 应用 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t216. 一步步开发一个 TODO 应用"> # </a></h2>
<h3 id="t226.1 入口文件">6.1 入口文件 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t226.1 入口文件"> # </a></h3>
<p><code>index.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>
<span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>
<span class="hljs-keyword">import</span> { Provider } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./containers/App'</span>
<span class="hljs-keyword">import</span> todoApp <span class="hljs-keyword">from</span> <span class="hljs-string">'./reducers'</span>

let store = createStore(todoApp)

let rootElement = document.getElementById(<span class="hljs-string">'app'</span>)
render(
  &lt;Provider store={store}&gt;
    &lt;App /&gt;
  &lt;/Provider&gt;,
  rootElement
)
</code></pre>
<h3 id="t236.2 Action 创建函数和常量">6.2 Action 创建函数和常量 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t236.2 Action 创建函数和常量"> # </a></h3>
<p><code>actions.js</code></p>
<pre><code class="lang-js"><span class="hljs-comment">/*
 * action 类型
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ADD_TODO = <span class="hljs-string">'ADD_TODO'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> COMPLETE_TODO = <span class="hljs-string">'COMPLETE_TODO'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> SET_VISIBILITY_FILTER = <span class="hljs-string">'SET_VISIBILITY_FILTER'</span>

<span class="hljs-comment">/*
 * 其它的常量
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> VisibilityFilters = {
  SHOW_ALL: <span class="hljs-string">'SHOW_ALL'</span>,
  SHOW_COMPLETED: <span class="hljs-string">'SHOW_COMPLETED'</span>,
  SHOW_ACTIVE: <span class="hljs-string">'SHOW_ACTIVE'</span>
};

<span class="hljs-comment">/*
 * action 创建函数
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTodo</span>(<span class="hljs-params">text</span>) </span>{
  <span class="hljs-keyword">return</span> { type: ADD_TODO, text }
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">completeTodo</span>(<span class="hljs-params">index</span>) </span>{
  <span class="hljs-keyword">return</span> { type: COMPLETE_TODO, index }
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setVisibilityFilter</span>(<span class="hljs-params">filter</span>) </span>{
  <span class="hljs-keyword">return</span> { type: SET_VISIBILITY_FILTER, filter }
}
</code></pre>
<h3 id="t246.3 Reducers">6.3 Reducers <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t246.3 Reducers"> # </a></h3>
<p><code>reducers.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { combineReducers } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>
<span class="hljs-keyword">import</span> { ADD_TODO, COMPLETE_TODO, SET_VISIBILITY_FILTER, VisibilityFilters } <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>
const { SHOW_ALL } = VisibilityFilters

function visibilityFilter(state = SHOW_ALL, action) {
  switch (action.type) {
    case SET_VISIBILITY_FILTER:
      return action.filter
    default:
      return state
  }
}

function todos(state = [], action) {
  switch (action.type) {
    case ADD_TODO:
      return [
        ...state,
        {
          text: action.text,
          completed: false
        }
      ]
    case COMPLETE_TODO:
      return [
        ...state.slice(0, action.index),
        Object.assign({}, state[action.index], {
          completed: true
        }),
        ...state.slice(action.index + 1)
      ]
    default:
      return state
  }
}

const todoApp = combineReducers({
  visibilityFilter,
  todos
})

export default todoApp
</code></pre>
<h3 id="t256.4 容器组件">6.4 容器组件 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t256.4 容器组件"> # </a></h3>
<p><code>containers/App.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>
<span class="hljs-keyword">import</span> { addTodo, completeTodo, setVisibilityFilter, VisibilityFilters } <span class="hljs-keyword">from</span> <span class="hljs-string">'../actions'</span>
<span class="hljs-keyword">import</span> AddTodo <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/AddTodo'</span>
<span class="hljs-keyword">import</span> TodoList <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/TodoList'</span>
<span class="hljs-keyword">import</span> Footer <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/Footer'</span>

class App extends Component {
  render() {
    // Injected by connect() call:
    const { dispatch, visibleTodos, visibilityFilter } = this.props
    return (
      &lt;div&gt;
        &lt;AddTodo
          onAddClick={text =&gt;
            dispatch(addTodo(text))
          } /&gt;
        &lt;TodoList
          todos={visibleTodos}
          onTodoClick={index =&gt;
            dispatch(completeTodo(index))
          } /&gt;
        &lt;Footer
          filter={visibilityFilter}
          onFilterChange={nextFilter =&gt;
            dispatch(setVisibilityFilter(nextFilter))
          } /&gt;
      &lt;/div&gt;
    )
  }
}

App.propTypes = {
  visibleTodos: PropTypes.arrayOf(PropTypes.shape({
    text: PropTypes.string.isRequired,
    completed: PropTypes.bool.isRequired
  }).isRequired).isRequired,
  visibilityFilter: PropTypes.oneOf([
    <span class="hljs-string">'SHOW_ALL'</span>,
    <span class="hljs-string">'SHOW_COMPLETED'</span>,
    <span class="hljs-string">'SHOW_ACTIVE'</span>
  ]).isRequired
}

function selectTodos(todos, filter) {
  switch (filter) {
    case VisibilityFilters.SHOW_ALL:
      return todos
    case VisibilityFilters.SHOW_COMPLETED:
      return todos.filter(todo =&gt; todo.completed)
    case VisibilityFilters.SHOW_ACTIVE:
      return todos.filter(todo =&gt; !todo.completed)
  }
}

// Which props do we want to inject, given the global state?
// Note: use https://github.com/faassen/reselect for better performance.
function select(state) {
  return {
    visibleTodos: selectTodos(state.todos, state.visibilityFilter),
    visibilityFilter: state.visibilityFilter
  }
}

// 包装 component ，注入 dispatch 和 state 到其默认的 connect(select)(App) 中；
export default connect(select)(App)
</code></pre>
<h3 id="t266.5 展示组件">6.5 展示组件 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t266.5 展示组件"> # </a></h3>
<p><code>components/AddTodo.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

export default class AddTodo extends Component {
  render() {
    return (
      &lt;div&gt;
        &lt;input type=<span class="hljs-string">'text'</span> ref=<span class="hljs-string">'input'</span> /&gt;
        &lt;button onClick={(e) =&gt; this.handleClick(e)}&gt;
          Add
        &lt;/button&gt;
      &lt;/div&gt;
    )
  }

  handleClick(e) {
    const node = this.refs.input
    const text = node.value.trim()
    this.props.onAddClick(text)
    node.value = <span class="hljs-string">''</span>
  }
}

AddTodo.propTypes = {
  onAddClick: PropTypes.func.isRequired
}
</code></pre>
<p><code>components/Footer.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

export default class Footer extends Component {
  renderFilter(filter, name) {
    if (filter === this.props.filter) {
      return name
    }

    return (
      &lt;a href=<span class="hljs-string">'#'</span> onClick={e =&gt; {
        e.preventDefault()
        this.props.onFilterChange(filter)
      }}&gt;
        {name}
      &lt;/a&gt;
    )
  }

  render() {
    return (
      &lt;p&gt;
        Show:
        {<span class="hljs-string">' '</span>}
        {this.renderFilter(<span class="hljs-string">'SHOW_ALL'</span>, <span class="hljs-string">'All'</span>)}
        {<span class="hljs-string">', '</span>}
        {this.renderFilter(<span class="hljs-string">'SHOW_COMPLETED'</span>, <span class="hljs-string">'Completed'</span>)}
        {<span class="hljs-string">', '</span>}
        {this.renderFilter(<span class="hljs-string">'SHOW_ACTIVE'</span>, <span class="hljs-string">'Active'</span>)}
        .
      &lt;/p&gt;
    )
  }
}

Footer.propTypes = {
  onFilterChange: PropTypes.func.isRequired,
  filter: PropTypes.oneOf([
    <span class="hljs-string">'SHOW_ALL'</span>,
    <span class="hljs-string">'SHOW_COMPLETED'</span>,
    <span class="hljs-string">'SHOW_ACTIVE'</span>
  ]).isRequired
}
</code></pre>
<p><code>components/Todo.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

export default class Todo extends Component {
  render() {
    return (
      &lt;li
        onClick={this.props.onClick}
        style={{
          textDecoration: this.props.completed ? <span class="hljs-string">'line-through'</span> : <span class="hljs-string">'none'</span>,
          cursor: this.props.completed ? <span class="hljs-string">'default'</span> : <span class="hljs-string">'pointer'</span>
        }}&gt;
        {this.props.text}
      &lt;/li&gt;
    )
  }
}

Todo.propTypes = {
  onClick: PropTypes.func.isRequired,
  text: PropTypes.string.isRequired,
  completed: PropTypes.bool.isRequired
}
</code></pre>
<p><code>components/TodoList.js</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> Todo <span class="hljs-keyword">from</span> <span class="hljs-string">'./Todo'</span>

export default class TodoList extends Component {
  render() {
    return (
      &lt;ul&gt;
        {this.props.todos.map((todo, index) =&gt;
          &lt;Todo {...todo}
                key={index}
                onClick={() =&gt; this.props.onTodoClick(index)} /&gt;
        )}
      &lt;/ul&gt;
    )
  }
}

TodoList.propTypes = {
  onTodoClick: PropTypes.func.isRequired,
  todos: PropTypes.arrayOf(PropTypes.shape({
    text: PropTypes.string.isRequired,
    completed: PropTypes.bool.isRequired
  }).isRequired).isRequired
}
</code></pre>
<h2 id="t27完结寄语">完结寄语 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t27完结寄语"> # </a></h2>
<p>Redux的基础部分的内容就到这里了，我们简单回顾下：基本的认识了redux的思想后，我们通过一个简单的例子快速的体验了redux的使用，通过对action、reducer、store等核心概念的讲解后我们可以理解redux的工作原理；在了解了redux的几个顶层API之后，我们学习了react-redux，并完成了一个基本示例，通过这个示例认识到react和redux结合使用的姿势；最后通过一步步开发一个todo应用来总结我们基础部分的内容学习。</p>
<p>另外，更多深入内容在<a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/%E8%AE%A9Redux%E6%9D%A5%E7%AE%A1%E7%90%86%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%88%E4%BA%8C%EF%BC%89.html">让Redux来管理你的应用（二）</a>和大家相见。</p>
<h2 id="t28参考资料">参考资料 <a href="http://guoyongfeng.github.io/idoc/html/React%E8%AF%BE%E7%A8%8B%E4%B8%93%E9%A2%98/Redux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html#t28参考资料"> # </a></h2>
<ul>
<li><a href="http://cn.redux.js.org/">Redux 中文文档</a></li>
<li><a href="https://github.com/reactjs/redux">redux on github</a></li>
</ul>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org/">Node.js</a> run.</div>
    </div>

</div>




</body></html>